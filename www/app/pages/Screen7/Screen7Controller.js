define(['require', 'app'], function(require, APP) {

    /**
     * Controller for Screen7 generated by Appery.io
     * @module Screen7
     */

    APP.controller('Screen7', ['$scope', 'Apperyio', controller]);

    function controller($scope, Apperyio) {

        /**
         * user controller variables
         */
        $scope.taskDescriptionVar = Apperyio.EntityAPI('String');
        $scope.incomingSubtask = Apperyio.EntityAPI('String');

        /**
         * User controller functions
         */
        /**
         * @function init
         */
        $scope.init = function() {
            $scope.subTasks = [];
            //On load screen logic
            var $routeParams = Apperyio.get("$routeParams");
            $scope.taskDescriptionVar = $routeParams.a1;
        };

        /**
         * @function addSubTask
         */
        $scope.addSubTask = function() {
            if ($scope.incomingSubtask) {
                $scope.subTasks.push($scope.incomingSubtask);
                $scope.incomingSubtask = "";
            }
        };

        /**
         * @function startTheTask
         */
        $scope.startTheTask = function() {
            if ($scope.subTasks.length < 1) {
                $scope.subTasks.push($scope.taskDescriptionVar);
            }
            Apperyio.navigateTo("Screen5", {
                a1: $scope.taskDescriptionVar,
                a2: $scope.subTasks
            });
        };

    }

});